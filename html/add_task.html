<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Task</title>

    <!-- Include favicon.ico picture -->
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.svg">

    <!-- Schriftart einbinden -->
    <link rel="stylesheet" href="../fonts.css">

    <!-- CSS Datei einbinden -->
    <link rel="stylesheet" href="../css/task.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/sidebar.css">

    <script src="../js/w3includes.js"></script>
    <script src="../js/storage.js"></script>

</head>

<body onload="loadIncludeHTML(), initTask()">

    <div w3-include-html="../assets/templates/header.html"></div>
	<div w3-include-html="../assets/templates/sidebar.html"></div>

    <div class="addTask">
        <h3>Add Task</h3>

        <form class="formAddTask" >
            <div class="formInput">
                <div class="leftSide">

                    <div class="inputContainer">
                        <label class="required" for="title">Title</label>
                        <input class="inputField" required type="text" id="title"
                            onfocusout="checkRequieredFields()" placeholder="Enter a title">
                        <div class="warning">
                            <span id="warningTitle" class="invisible">This field is requiered</span>
                        </div>
                    </div>

                    <div class="inputContainer">
                        <label for="description">Description</label>
                        <textarea class="inputField description" minlength="5" id="description" rows="8" cols="50"
                            placeholder="Enter a Description"></textarea>
                    </div>

                    <div class="inputContainer">
                        <label for="assignedTo">Assigned to</label>
                        <select class="custom-select" onclick="toggleContacts()" onkeyup="getContacts()" id="assignedTo"
                            type="text" placeholder="">
                            <option value="" disabled selected hidden>Select contacts to assign</option>
                        </select>
                        <div class="d-none" id="assignedToContainer">
                            <ul id="assignedToContact"></ul>
                            <!-- Hier noch Link auf Kontakte einfÃ¼gen -->
                            <a href="contacts.html">
                                <button class="createContactBtn">
                                    Add new contact
                                    <img class="addContact" src="../assets/img/person_add.svg" alt="Add Contact">
                                </button>
                            </a>
                        </div>
                    </div>
                    <div id="showAssignedContacts"></div>
                </div>


                <div class="divider">
                </div>

                <div class="rightSide">

                    <div class="inputContainer">
                        <label class="required" for="dueDate">Due date</label>
                        <input id="dueDate" class="inputField" onfocusout="checkRequieredFields()" required min="" type="date">
                        <div class="warning">
                            <span id="warningDueDate" class="invisible">This field is requiered</span>
                        </div>
                    </div>

                    <div class="inputContainer">
                        <label>Prio</label>
                        <div class="button-container" id="prio">
                            <button class="white" id="urgent" onclick="taskPrio('urgent')" type="button">Urgent<img
                                    src="../assets/img/urgent.svg" alt=""></button>
                            <button class="white" id="medium" onclick="taskPrio('medium')" type="button">Medium<img
                                    src="../assets/img/medium.svg" alt=""></button>
                            <button class="white" id="low" onclick="taskPrio('low')" type="button">Low<img
                                    src="../assets/img/low.svg" alt=""></button>
                        </div>
                    </div>


                    <div class="inputContainer">
                        <label class="required" for="category">Category</label>
                        <select class="custom-select" id="category" name="category" required onfocusout="checkRequieredFields()">
                            <option value="" disabled selected hidden>Select task category</option>
                            <option value="Technical Task">Technical Task</option>
                            <option value="User Story">User Story</option>
                        </select>
                        <div class="warning">
                            <span id="warningcategory" class="invisible">This field is requiered</span>
                        </div>
                    </div>


                    <div class="inputContainer" >
                        <label for="subtask">Subtask</label>
                        <div  onfocus="switchIons(1)" onblur="switchIons(1)">
                            <input class="subtask" type="text" id="subtask" placeholder="Add new subtask">
                            <div id="allSubtasks">
                                <img id="idSubtaskPlus" src="../assets/img/addbutton.svg" onclick="switchIons(2)" class="d-none">
                                <!-- onclick="switchIons(4)" -->
                                <div id="idSubtaskIconContainer" class="subtaskIconContainer">
                                    <img src="../assets/img/cancel.svg" alt="" onclick="switchIons(4)">
                                    <div id="idSubTaskDivider" class="subTaskDivider"></div>
                                    <img src="../assets/img/checkbox.png" alt="" onclick="addSubtask(); switchIons(4)">
                                </div>
                            </div>
                        </div>
                    </div>                

                </div>
            </div>



            <div class="footArea">
                <p><sup class="required"></sup>This field is required</p>
                <div class=btnAddTask>
                    <button class="cancelBtn" onclick="reload()">Cancel <img src="../assets/img/cancel.svg"
                            alt=""></button>
                    <button class="activeBtn" onclick="addTask('toDo')" >Create Task <img src="../assets/img/check.svg"
                            alt=""></button>
                </div>
            </div>
        </form>
    </div>

    <script src="../js/add_task.js"></script>

</body>

</html>