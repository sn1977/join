<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Task</title>

    <!-- Include favicon.ico picture -->
    <link rel="icon" type="image/x-icon" href="../assets/img/favicon.svg">

    <!-- Schriftart einbinden -->
    <link rel="stylesheet" href="../fonts.css">

    <!-- CSS Datei einbinden -->
    <link rel="stylesheet" href="../css/task.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/sidebar.css">
    <link rel="stylesheet" href="../css/contacts.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <script src="../js/w3includes.js"></script>
    <script src="../js/storage.js"></script>
    <script src="../js/templates.js"></script>
</head>

<body onload="loadIncludeHTML(), initTask()">

    <div w3-include-html="../assets/templates/header.html"></div>
    <div w3-include-html="../assets/templates/sidebar.html"></div>

    <div class="addTask">
        <h3>Add Task</h3>

        <div class="formAddTask">
            <div class="formInput">
                <div class="leftSide">

                    <div class="inputContainer">
                        <label class="required" for="title">Title</label>
                        <input class="inputField" required type="text" id="title"
                            onfocusout="checkRequieredFields('title')" placeholder="Enter a title">
                        <div class="warning">
                            <span id="warningtitle" class="invisible">This field is requiered</span>
                        </div>
                    </div>

                    <div class="inputContainer">
                        <label for="description">Description</label>
                        <textarea class="inputField description" minlength="5" id="description" rows="8" cols="50"
                            placeholder="Enter a Description"></textarea>
                    </div>

                    <div class="inputContainer">
                        <label for="assignedTo">Assigned to</label>
                        <input class="custom-select" onclick="toggleContacts()" onkeyup="addTaskGetContacts()"
                            id="assignedTo" type="text" placeholder="Select contacts to assign">

                        <div class="d-none" id="assignedToContainer">
                            <div id="assignedToContact"></div>

                            <button class="createContactBtn" onclick="overlayAddContact()">
                                Add new contact
                                <img class="addContact" src="../assets/img/person_add.svg" alt="Add Contact">
                            </button>
                        </div>
                    </div>

                    <div id="showAssignedContacts"></div>
                </div>

                <div class="divider">
                </div>

                <div class="rightSide">

                    <div class="inputContainer">
                        <label class="required" for="dueDate">Due date</label>
                        <input required="" placeholder="dd/mm/yyyy" type="text" id="dueDate" onclick="openDatePicker()">
                        <div class="warning">
                            <span id="warningDueDate" class="invisible">This field is requiered</span>
                        </div>
                    </div>



                    <div class="inputContainer">
                        <label>Prio</label>
                        <div class="button-container" id="prio">
                            <button class="white" id="urgent" onclick="taskPrio('urgent')" type="button">Urgent<img
                                    src="../assets/img/urgent.svg" alt=""></button>
                            <button class="white" id="medium" onclick="taskPrio('medium')" type="button">Medium<img
                                    src="../assets/img/medium.svg" alt=""></button>
                            <button class="white" id="low" onclick="taskPrio('low')" type="button">Low<img
                                    src="../assets/img/low.svg" alt=""></button>
                        </div>
                    </div>

                    <div class="inputContainer">
                        <label class="required" for="category">Category</label>
                        <select class="custom-select" id="category" name="category" required
                            onfocusout="checkRequieredFields()">
                            <option value="" disabled selected hidden>Select task category</option>
                            <option value="Technical Task">Technical Task</option>
                            <option value="User Story">User Story</option>
                        </select>
                        <div class="warning">
                            <span id="warningcategory" class="invisible">This field is requiered</span>
                        </div>
                    </div>

                    <div class="inputContainer">
                        <label for="subtask">Subtask</label>
                        <div class="inputField subtaskContainer">
                            <input type="text" id="subtask" placeholder="Add new subtask" onfocus="switchToInput()">
                            <!-- onblur="switchBack()" -->
                            <div id="addSubtask">
                                <img src="../assets/img/add.svg" onclick="switchToInput()">
                            </div>
                            <div id="inputsubtask" style="display: none;">
                                <img src="../assets/img/close.svg" onclick="delInput()">
                                <div>|</div>
                                <img src="../assets/img/check-black.svg" onclick="addSubtask()">
                            </div>
                        </div>
                        <div id="savedSubtasks" class="savedSubtasks">
                        </div>
                    </div>

                </div>
            </div>

            <div class="footArea">
                <p><sup class="required"></sup>This field is required</p>
                <div class=btnAddTask>
                    <button class="cancelBtn" onclick="reload()">Cancel <img src="../assets/img/cancel.svg"></button>
                    <button class="activeBtn" onclick="addTask('todo')">Create Task <img src="../assets/img/check.svg"
                            alt=""></button>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/contacts.js"></script>
    <script src="../js/add_task.js"></script>

</body>

</html>